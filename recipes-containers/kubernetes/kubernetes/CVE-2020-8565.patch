From f0f52255412cbc6834bd225a59608ebb4a0d399b Mon Sep 17 00:00:00 2001
From: Sam Fowler <sfowler@redhat.com>
Date: Tue, 6 Oct 2020 11:10:38 +1000
Subject: [PATCH] Mask bearer token in logs when logLevel >= 9

Upstream-Status: Backport [https://github.com/kubernetes/kubernetes/commit/f0f52255412cbc6834bd225a59608ebb4a0d399b]
CVE: CVE-2020-8565
Signed-off-by: Vijay Anusuri <vanusuri@mvista.com>
---
 staging/src/k8s.io/client-go/transport/round_trippers.go | 1 +
 1 file changed, 1 insertion(+)

diff --git a/staging/src/k8s.io/client-go/transport/round_trippers.go b/staging/src/k8s.io/client-go/transport/round_trippers.go
index a05208d924d3b..f4cfadbd3da8e 100644
--- a/src/import/staging/src/k8s.io/client-go/transport/round_trippers.go
+++ b/src/import/staging/src/k8s.io/client-go/transport/round_trippers.go
@@ -340,6 +340,7 @@ func (r *requestInfo) toCurl() string {
 	headers := ""
 	for key, values := range r.RequestHeaders {
 		for _, value := range values {
+			value = maskValue(key, value)
 			headers += fmt.Sprintf(` -H %q`, fmt.Sprintf("%s: %s", key, value))
 		}
 	}
